<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Web - BoltOn</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Web";
    var mkdocs_page_input_path = "web.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> BoltOn</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../requestor/">Requestor</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../data/">Data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../bus/">Bus</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../cache/">Cache</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../statemachine/">State Machine</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Web</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#filters">Filters</a></li>
    

    <li class="toctree-l2"><a href="#middlewares">Middlewares</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../utilities/">Utilities</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../logging/">Logging</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../samples/">Samples</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../build/">CI & CD</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">BoltOn</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Web</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><strong>BoltOn.Web</strong> has a few filters and middlewares to be used in MVC/WebAPI applications.</p>
<p>In order to use the <strong>BoltOn.Web</strong> module, do the following:</p>
<ul>
<li>Install <strong>BoltOn.Web</strong> NuGet package.</li>
<li>Call <code>BoltOnWebModule()</code> in your startup's BoltOn() method.</li>
<li>Call TightenBolts() extenstion method for <code>IApplicationBuilder</code>.</li>
</ul>
<h2 id="filters">Filters</h2>
<ul>
<li>
<p><a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Web/Filters/ModelValidationFilter.cs"><code>ModelValidationFilter</code></a>
<br />
It's a global filter which validates the models and throws <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Web/Exceptions/BadRequestException.cs"><code>BadRequestException</code></a> with the validation error messages set in the DataAnnotation attributes.</p>
</li>
<li>
<p><a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Web/Filters/CustomExceptionFilter.cs"><code>CustomExceptionFilter</code></a>
<br />
It's a global filter to handle all the exceptions thrown in the application and returns JSON with the CorrelationId as the Id, error message and with any of these HTTP response codes:</p>
<ul>
<li>HTTP Response 400 - This is returned when a <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Web/Exceptions/BadRequestException.cs"><code>BadRequestException</code></a> is thrown in the application, which usually happens for model validation errors. The ModelValidationFilter mentioned above throws this exception.</li>
<li>HTTP Response 412 - This is returned when a <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Web/Exceptions/BusinessValidationException.cs"><code>BusinessValidationException</code></a> is thrown in the application, which is mainly used to display the actual business validation message to the user.</li>
<li>HTTP Response 500 - This status code is returned for all the unhandled exceptions with a generic error message or the actual exception message. The generic error message can be set in the appSettings with the key "ErrorMessage", and whether to return the actual exception message or a generic message can be controlled by a flag with the key "IsShowErrors" in the appSettings. It's recommended to enable IsShowErrors in the lower environments and disable it in the higher environments as the exception messages could have sensitive information.</li>
</ul>
</li>
</ul>
<p>The global filters can be registered like this in a WebAPI application:</p>
<pre><code>services.AddControllers(c =&gt;
{
    c.Filters.Add&lt;CustomExceptionFilter&gt;();
    c.Filters.Add&lt;ModelValidationFilter&gt;();
});
</code></pre>
<p>For MVC application, <code>AddControllersWithViews</code> method can be used.</p>
<h2 id="middlewares">Middlewares</h2>
<ul>
<li><a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Web/Middlewares/RequestLoggerContextMiddleware.cs"><code>RequestLoggerContextMiddleware</code></a>
<br /> It's mainly used to add ClientIp, RequestUrl and CorrelationId to the LoggerContext, and it's automatically added when the BoltOn.Web is added. </li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../utilities/" class="btn btn-neutral float-right" title="Utilities">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../statemachine/" class="btn btn-neutral" title="State Machine"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../statemachine/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../utilities/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
